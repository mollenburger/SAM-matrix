<queryGroup name="agriculture and land use">
    <queryGroup name="land use">
        <query title="detailed land allocation">
            <axis1 name="LandLeaf">LandLeaf[@name]</axis1>
            <axis2 name="Year">land-allocation[@year]</axis2>
            <xPath buildList="true" dataName="LandLeaf" group="false" sumAll="false">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//land-allocation/text()</xPath>
            <comments/>
        </query>
        <query title="land allocation by crop">
            <axis1 name="LandLeaf">LandLeaf[@crop]</axis1>
            <axis2 name="Year">land-allocation[@year]</axis2>
            <xPath buildList="true" dataName="LandLeaf" group="false" sumAll="false">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//land-allocation/text()</xPath>
            <comments/>
        </query>
        <query title="aggregated land allocation">
            <axis1 name="LandLeaf">LandLeaf[@crop]</axis1>
            <axis2 name="Year">land-allocation[@year]</axis2>
            <xPath buildList="true" dataName="LandLeaf" group="false" sumAll="false">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//land-allocation/text()</xPath>
            <comments/>
            <labelRewriteList append-values="false">
                <level name="LandLeaf">
                    <rewrite from="Grassland" to="grass"/>
                    <rewrite from="ProtectedUnmanagedPasture" to="pasture (other)"/>
                    <rewrite from="FodderHerb" to="crops"/>
                    <rewrite from="MiscCrop" to="crops"/>
                    <rewrite from="PalmFruit" to="crops"/>
                    <rewrite from="FiberCrop" to="crops"/>
                    <rewrite from="OtherGrain" to="crops"/>
                    <rewrite from="FodderGrass" to="crops"/>
                    <rewrite from="ProtectedGrassland" to="grass"/>
                    <rewrite from="ProtectedUnmanagedForest" to="forest (unmanaged)"/>
                    <rewrite from="biomassTree" to="biomass"/>
                    <rewrite from="OtherArableLand" to="otherarable"/>
                    <rewrite from="Rice" to="crops"/>
                    <rewrite from="UrbanLand" to="urban"/>
                    <rewrite from="RockIceDesert" to="rock and desert"/>
                    <rewrite from="RootTuber" to="crops"/>
                    <rewrite from="Corn" to="crops"/>
                    <rewrite from="OilCrop" to="crops"/>
                    <rewrite from="ProtectedShrubland" to="shrubs"/>
                    <rewrite from="SugarCrop" to="crops"/>
                    <rewrite from="UnmanagedForest" to="forest (unmanaged)"/>
                    <rewrite from="Pasture" to="pasture (grazed)"/>
                    <rewrite from="Forest" to="forest (managed)"/>
                    <rewrite from="biomassGrass" to="biomass"/>
                    <rewrite from="Shrubland" to="shrubs"/>
                    <rewrite from="UnmanagedPasture" to="pasture (other)"/>
                    <rewrite from="Tundra" to="tundra"/>
                    <rewrite from="Wheat" to="crops"/>
                </level>
            </labelRewriteList>
        </query>
        <query title="land allocation in a specified land use region">
            <axis1 name="LandLeaf">LandLeaf[@name]</axis1>
            <axis2 name="Year">land-allocation[@year]</axis2>
            <xPath buildList="true" dataName="LandLeaf" group="false" sumAll="false">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//
        LandLeaf[@land-region='MissouriR']/
        land-allocation/text()</xPath>
            <comments/>
        </query>
        <query title="land allocation by crop and water source">
            <axis1 name="water">water[@name]</axis1>
            <axis2 name="Year">land-allocation[@year]</axis2>
            <xPath buildList="true" dataName="LandLeaf" group="false" sumAll="false">
                <![CDATA[
        declare function local:nest-land-category($leaf as node(), $level as xs:string, $child as node()*) as node() {
            let $attrMatch := $leaf/@*[name()=$level],
                $attrValue := if(exists($attrMatch)) then string($attrMatch) else "NA"
            return element { $level } {
                attribute name { $attrValue },
                $child
            }
        };
        declare function local:run-nest-land-categories($scenarios as xs:string*, $regions as xs:string*, $collection as xs:string) as node()* {
            let $regionsG := if(not($regions[1] = 'Global'))
                             then $regions
                             else distinct-values(collection($collection)/scenario/world/*[@type='region']/@name)
            return
                for $scenario in $scenarios,
                    $region in $regionsG
                let $scenario_split := tokenize($scenario, ' '),
                    $currTree := collection($collection)/scenario[@name = $scenario_split[1] and @date = $scenario_split[2]]/world/*[@type='region' and @name=$region],
                    $landLeaves := $currTree//LandNode[@name='root' or @type='LandNode' (:collapse:)]//LandLeaf,
                    $ret := document {
                        element scenario {
                            attribute name { $scenario_split[1] },
                            attribute date { $scenario_split[2] },
                            element region {
                                attribute type { "region" },
                                attribute name { $region },
                                for $leaf in $landLeaves
                                (: TODO: not sure why I have to explicitly copy the land-allocation :)
                                let $copy := for $landAlloc in $leaf/land-allocation
                                             return element land-allocation {
                                                $landAlloc/@*,
                                                text { $landAlloc/text() }
                                             }
                                (: A user could choose to nest by recursively calling for any of: ("crop", "land-region", "water", "mgmt-tech") :)
                                return local:nest-land-category($leaf, "crop", local:nest-land-category($leaf, "water", $copy))
                            }
                        }
                    }
                return $ret//text()
        };
        local:run-nest-land-categories((:scenarios:), (:regions:), (:collection:))

        ]]>
            </xPath>
            <comments/>
        </query>
        <query title="LUC emissions by region">
            <axis1 name="LandLeaf">LandLeaf</axis1>
            <axis2 name="Year">land-use-change-emission[@year]</axis2>
            <xPath buildList="true" dataName="land-use-change-emission" group="false" sumAll="true">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//
            land-use-change-emission[@year&gt;1970]/text()</xPath>
            <comments/>
        </query>
        <query title="LUC emissions by LUT">
            <axis1 name="LandLeaf">LandLeaf</axis1>
            <axis2 name="Year">land-use-change-emission[@year]</axis2>
            <xPath buildList="true" dataName="land-use-change-emission" group="false" sumAll="false">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//
            land-use-change-emission[@year&gt;1970]/text()</xPath>
            <comments/>
        </query>
        <query title="LUC emissions by LUT in a specified land use region">
            <axis1 name="LandLeaf">LandLeaf</axis1>
            <axis2 name="Year">land-use-change-emission[@year]</axis2>
            <xPath buildList="true" dataName="land-use-change-emission" group="false" sumAll="false">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//
        LandLeaf[@land-region='MissouriR']//
        land-use-change-emission[@year&gt;1970]/text()</xPath>
            <comments/>
        </query>
        <query title="vegetative carbon stock by region">
            <axis1 name="LandLeaf">LandLeaf</axis1>
            <axis2 name="Year">above-ground-carbon-stock[@year]</axis2>
            <xPath buildList="true" dataName="above-ground-carbon-stock" group="false" sumAll="true">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//
            above-ground-carbon-stock[@year&gt;1970]/text()</xPath>
            <comments/>
        </query>
        <query title="profit rate">
            <axis1 name="LandLeaf">LandLeaf</axis1>
            <axis2 name="Year">profit-rate[@year]</axis2>
            <xPath buildList="true" dataName="profit-rate" group="false" sumAll="false">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//profit-rate/text()</xPath>
            <comments/>
        </query>
        <query title="profit rate in a specified land use region">
            <axis1 name="LandLeaf">LandLeaf</axis1>
            <axis2 name="Year">profit-rate[@year]</axis2>
            <xPath buildList="true" dataName="profit-rate" group="false" sumAll="false">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//
        LandLeaf[@land-region='MissouriR']/
        profit-rate/text()</xPath>
            <comments/>
        </query>
        <query title="land leaf shares">
            <axis1 name="LandLeaf">LandLeaf</axis1>
            <axis2 name="Year">share[@year]</axis2>
            <xPath buildList="true" dataName="share" group="false" sumAll="false">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//share/text()</xPath>
            <comments/>
        </query>
        <query title="land leaf shares in a specified land use region">
            <axis1 name="LandLeaf">LandLeaf</axis1>
            <axis2 name="Year">share[@year]</axis2>
            <xPath buildList="true" dataName="share" group="false" sumAll="false">/LandNode[@name='root' or @type='LandNode' (:collapse:)]//
        LandLeaf[@land-region='MissouriR']/
        share/text()</xPath>
            <comments/>
        </query>
    </queryGroup>
    <queryGroup name="crops">
        <queryGroup name="crop production">
            <supplyDemandQuery title="ag production by crop type">
                <axis1 name="sector">sector[@name]</axis1>
                <axis2 name="Year">physical-output[@vintage]</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and (local-name()='AgSupplySector')]//
        output-primary/physical-output/node()</xPath>
                <comments>primary output only (no residue biomass)</comments>
            </supplyDemandQuery>
            <supplyDemandQuery title="ag production by subsector (land use region)">
                <axis1 name="technology">technology[@name]</axis1>
                <axis2 name="Year">physical-output[@vintage]</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and (local-name()='AgSupplySector')]/
        *[@type='subsector']//output-primary/physical-output/node()</xPath>
                <comments>primary output only (no residue biomass)</comments>
            </supplyDemandQuery>
            <supplyDemandQuery title="ag production in a specified land use region">
                <axis1 name="technology">technology[@name]</axis1>
                <axis2 name="Year">physical-output[@vintage]</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and (local-name()='AgSupplySector')]/
        *[@type='subsector' and contains(@name,'MissouriR')]//
        output-primary/physical-output/node()</xPath>
                <comments>primary output only (no residue biomass)</comments>
            </supplyDemandQuery>
            <supplyDemandQuery title="ag production by tech">
                <axis1 name="technology">technology[@name]</axis1>
                <axis2 name="Year">physical-output[@vintage]</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and (local-name()='AgSupplySector')]/
        *[@type='subsector']/*[@type='technology']/
        output-primary/physical-output/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="ag tech variable cost">
                <axis1 name="technology">technology</axis1>
                <axis2 name="Year">technology</axis2>
                <xPath buildList="true" dataName="nonLandVariableCost" group="false" sumAll="false">*[@type='sector' and (local-name()='AgSupplySector')]/
        *[@type='subsector']/*[@type='technology']/nonLandVariableCost/text()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="ag tech yield">
                <axis1 name="technology">technology</axis1>
                <axis2 name="Year">technology</axis2>
                <xPath buildList="true" dataName="yield" group="false" sumAll="false">*[@type='sector' and (local-name()='AgSupplySector')]/
        *[@type='subsector']/*[@type='technology']/yield/text()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="ag tech yield in a specified land region">
                <axis1 name="technology">technology</axis1>
                <axis2 name="Year">technology</axis2>
                <xPath buildList="true" dataName="yield" group="false" sumAll="false">*[@type='sector' and (local-name()='AgSupplySector')]/
        *[@type='subsector']/*[@type='technology' and contains(@name,'MissouriR')]/yield/text()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="ag commodity prices">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">cost</axis2>
                <xPath buildList="true" dataName="price" group="false" sumAll="false">*[@type='sector' and (local-name()='AgSupplySector')]/cost/text()</xPath>
                <comments/>
            </supplyDemandQuery>
        </queryGroup>
        <queryGroup name="crop water demands">
            <supplyDemandQuery title="irrigation water withdrawals by region">
                <axis1 name="region">region</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' (:collapse:) and not(contains(@name, 'water_td_irr')) ]//
           *[@type='input' (:collapse:) and contains(@name, 'water_td_irr') and ends-with(@name, '_W')]/
           demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="irrigation water withdrawals by crop type">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' and not(contains(@name, 'water_td_irr'))]//*[@type='input' (:collapse:) and contains(@name, 'water_td_irr') and ends-with(@name, '_W')]/
           demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="irrigation water withdrawals by crop type and land region">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' and not(contains(@name, 'water_td_irr'))]/*[@type='subsector']//*[@type='input' and contains(@name, 'water_td_irr')
           and ends-with(@name, '_W')]/demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="irrigation water withdrawals by ag tech">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' and not(contains(@name, 'water_td_irr'))]/*[@type='subsector']/*[@type='technology']/
           *[@type='input' and contains(@name, 'water_td_irr') and ends-with(@name, '_W')]/
           demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="irrigation water consumption by region">
                <axis1 name="region">region</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' (:collapse:) and not(contains(@name, 'water_td_irr'))]//
           *[@type='input' (:collapse:) and contains(@name, 'water_td_irr') and ends-with(@name, '_C')]/
           demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="irrigation water consumption by crop type">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' and not(contains(@name, 'water_td_irr'))]//*[@type='input' (:collapse:) and contains(@name, 'water_td_irr')
           and ends-with(@name, '_C')]/demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="irrigation water consumption by crop type and land region">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' and not(contains(@name, 'water_td_irr'))]/*[@type='subsector']//*[@type='input' and contains(@name, 'water_td_irr')
           and ends-with(@name, '_C')]/demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="irrigation water consumption by ag tech">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' and not(contains(@name, 'water_td_irr'))]/*[@type='subsector']/*[@type='technology']/
           *[@type='input' and contains(@name, 'water_td_irr') and ends-with(@name, '_C')]/
           demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="biophysical water demand by region">
                <axis1 name="region">region</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' (:collapse:) and (local-name()='AgSupplySector')]//
           *[@type='input' (:collapse:) and (@name='biophysical water consumption')]/
           demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="biophysical water demand by crop type">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">AgSupplySector//*[@type='input' (:collapse:) and
           (@name='biophysical water consumption')]/demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="biophysical water demand by crop type and land region">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">AgSupplySector/*[@type='subsector']//*[@type='input' and (@name='biophysical water consumption')]/
           demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="biophysical water demand by ag tech">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">AgSupplySector/*[@type='subsector']/*[@type='technology']/
           *[@type='input' and (@name='biophysical water consumption')]/demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
        </queryGroup>
        <queryGroup name="crop fertilizer demands">
            <supplyDemandQuery title="fertilizer consumption by region">
                <axis1 name="region">region</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' (:collapse:) and not (@name='Exports_N fertilizer')]//
           *[@type='input' and (@name='N fertilizer')]/demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="fertilizer consumption by crop type">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' and not (@name='Exports_N fertilizer')]//
           *[@type='input' and (@name='N fertilizer')]/demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="fertilizer consumption by ag tech">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' and not (@name='Exports_fertilizer')]/
           *[@type='subsector']/*[@type='technology']/*[@type='input' and (@name='N fertilizer')]/demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="fertilizer-crop input-output coefficients">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">IO-coefficient[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">AgSupplySector/*[@type='subsector']/
           *[@type='technology']/*[@type='input' and (@name='N fertilizer')]/IO-coefficient/node()</xPath>
                <comments/>
            </supplyDemandQuery>
        </queryGroup>
    </queryGroup>
    <queryGroup name="bioenergy">
        <supplyDemandQuery title="purpose-grown biomass production">
            <axis1 name="sector">sector[@name]</axis1>
            <axis2 name="Year">physical-output[@vintage]</axis2>
            <xPath buildList="false" dataName="output" group="false" sumAll="false">*[@type='sector' and (@name='biomass')]//*[@type='output' (:collapse:)]/
        physical-output/node()</xPath>
            <comments/>
        </supplyDemandQuery>
        <supplyDemandQuery title="residue biomass production">
            <axis1 name="sector">sector[@name]</axis1>
            <axis2 name="Year">physical-output[@vintage]</axis2>
            <xPath buildList="false" dataName="output" group="false" sumAll="false">*[@type='sector']//output-residue-biomass/physical-output/node()</xPath>
            <comments/>
        </supplyDemandQuery>
        <resourceQuery title="MSW production">
            <axis1 name="resource">resource</axis1>
            <axis2 name="Year">output</axis2>
            <xPath buildList="false" dataName="production" group="false" sumAll="false">*[@type='resource' and (@name='biomass')]//output/node()</xPath>
            <comments/>
        </resourceQuery>
        <supplyDemandQuery title="regional biomass consumption">
            <axis1 name="sector">sector</axis1>
            <axis2 name="Year">demand-physical[@vintage]</axis2>
            <xPath buildList="false" dataName="input" group="false" sumAll="false">*[@type='sector' and (@name='regional biomass')]//*[@type='input']/
        demand-physical/node()</xPath>
            <comments/>
        </supplyDemandQuery>
    </queryGroup>
    <queryGroup name="animal products">
        <queryGroup name="meat and dairy">
            <supplyDemandQuery title="meat and dairy production by type">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">physical-output[@vintage]</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and
           (@name='Beef' or @name='SheepGoat' or @name='Pork' or @name='Dairy' or @name='Poultry')]//
           *[@type='output']/physical-output/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="meat and dairy production by tech">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">physical-output[@vintage]</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and
           (@name='Beef' or @name='SheepGoat' or @name='Pork' or @name='Dairy' or @name='Poultry')]/
           *[@type='subsector']/*[@type='technology']//
           *[@type='output']/physical-output/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="meat and dairy prices">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">cost</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and
           (@name='Beef' or @name='SheepGoat' or @name='Pork' or @name='Dairy' or @name='Poultry')]/
           cost/text()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="meat and dairy subsector share-weights">
                <axis1 name="subsector">subsector</axis1>
                <axis2 name="Year">share-weight</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and
           (@name='Beef' or @name='SheepGoat' or @name='Pork' or @name='Dairy' or @name='Poultry')]/
           *[@type='subsector']/share-weight/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="meat and dairy tech share-weights">
                <axis1 name="technology">technology</axis1>
                <axis2 name="Year">technology</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and
           (@name='Beef' or @name='SheepGoat' or @name='Pork' or @name='Dairy' or @name='Poultry')]/
           *[@type='subsector']/*[@type='technology']/share-weight/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="meat and dairy subsector costs">
                <axis1 name="subsector">subsector</axis1>
                <axis2 name="Year">cost</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and
           (@name='Beef' or @name='SheepGoat' or @name='Pork' or @name='Dairy' or @name='Poultry')]/
           *[@type='subsector']/cost/text()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="meat and dairy tech costs">
                <axis1 name="technology">technology</axis1>
                <axis2 name="Year">technology</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and
           (@name='Beef' or @name='SheepGoat' or @name='Pork' or @name='Dairy' or @name='Poultry')]/
           *[@type='subsector']/*[@type='technology']/cost/text()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="water consumption by meat and dairy production">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector']//
           *[@type='input' and contains(@name,'water_td_an') and ends-with(@name,'_C')]/
           demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
        </queryGroup>
        <queryGroup name="animal feed">
            <supplyDemandQuery title="feed consumption by region">
                <axis1 name="region">region</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' (:collapse:) and
           (@name='Beef' or @name='SheepGoat' or @name='Pork' or @name='Dairy' or @name='Poultry' )]//
           *[@type='input' and not(@name='renewable') and not(contains(@name,'water_td'))]/
           demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="feed consumption by meat and dairy tech">
                <axis1 name="technology">technology</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' and
           (@name='Beef' or @name='SheepGoat' or @name='Pork' or @name='Dairy' or @name='Poultry' )]/
           *[@type='subsector']/*[@type='technology']/
           *[@type='input' and not(@name='renewable') and not(contains(@name,'water_td'))]/
           demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="feed sources">
                <axis1 name="input">input</axis1>
                <axis2 name="Year">demand-physical[@vintage]</axis2>
                <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector' and
           (@name='FodderHerb_Residue' or @name='Pasture_FodderGrass' or @name='FeedCrops' or @name='Scavenging_Other')]//
           *[@type='input']/demand-physical/node()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="feed prices">
                <axis1 name="sector">sector</axis1>
                <axis2 name="Year">cost</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and
           (@name='FeedCrops' or @name='FodderHerb_Residue' or @name='Pasture_FodderGrass' or @name='Scavenging_Other')]/
           cost/text()</xPath>
                <comments/>
            </supplyDemandQuery>
            <supplyDemandQuery title="feed subsector share-weights">
                <axis1 name="subsector">subsector</axis1>
                <axis2 name="Year">share-weight</axis2>
                <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and
           (@name='Scavenging_Other' or @name='Pasture_FodderGrass' or @name='FodderHerb_Residue' or @name='FeedCrops')]/
           *[@type='subsector']/share-weight/text()</xPath>
                <comments/>
            </supplyDemandQuery>
        </queryGroup>
    </queryGroup>
    <queryGroup name="ag demands">
        <supplyDemandQuery title="food consumption by type (general)">
            <axis1 name="sector">sector</axis1>
            <axis2 name="Year">physical-output[@vintage]</axis2>
            <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and (@name='FoodDemand_Crops' or @name='FoodDemand_Meat')]//
        *[@type='output']/physical-output/node()</xPath>
            <comments/>
        </supplyDemandQuery>
        <supplyDemandQuery title="food consumption by type (specific)">
            <axis1 name="technology">technology</axis1>
            <axis2 name="Year">physical-output[@vintage]</axis2>
            <xPath buildList="true" dataName="output" group="false" sumAll="false">*[@type='sector' and (@name='FoodDemand_Crops' or @name='FoodDemand_Meat')]/
        *[@type='subsector']/*[@type='technology']/
        *[@type='output']/physical-output/node()</xPath>
            <comments/>
        </supplyDemandQuery>
        <supplyDemandQuery title="demand balances by crop commodity">
            <axis1 name="sector">sector</axis1>
            <axis2 name="Year">demand-physical[@vintage]</axis2>
            <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector']//*[@type='input' and
        (@name='regional corn' or @name='regional fibercrop'
           or @name='regional misccrop' or @name='regional oilcrop' or @name='regional othergrain'
           or @name='regional palmfruit' or @name='regional rice' or @name='regional root_tuber'
           or @name='regional sugarcrop' or @name='regional wheat' or @name='FodderGrass' or @name='FodderHerb'
           or @name='Forest' or @name='Pasture')]/
           demand-physical/node()</xPath>
            <comments/>
        </supplyDemandQuery>
        <supplyDemandQuery title="demand balances by meat and dairy commodity">
            <axis1 name="sector">sector</axis1>
            <axis2 name="Year">demand-physical[@vintage]</axis2>
            <xPath buildList="true" dataName="input" group="false" sumAll="false">*[@type='sector']//*[@type='input' and
        (@name='Beef' or @name='Pork' or @name='Poultry' or @name='SheepGoat' or @name='OtherMeat_Fish')]/
        demand-physical/node()</xPath>
            <comments/>
        </supplyDemandQuery>
  <supplyDemandQuery title="food demand prices">
    <axis1 name="input">input[@name]</axis1>
    <axis2 name="Year">price-paid[@vintage]</axis2>
    <xPath buildList="true" dataName="price" group="false" sumAll="false">gcam-consumer[@name='FoodDemand']//*[@type='input']/price-paid/node()</xPath>
    <comments/>
  </supplyDemandQuery>
  <supplyDemandQuery title="food demand">
    <axis1 name="input">input[@name]</axis1>
    <axis2 name="Year">demand-physical[@vintage]</axis2>
    <xPath buildList="true" dataName="demand" group="false" sumAll="false">gcam-consumer[@name='FoodDemand']//*[@type='input']/demand-physical/node()</xPath>
    <comments/>
  </supplyDemandQuery>
  <supplyDemandQuery title="food demand per capita">
    <axis1 name="input">input[@name]</axis1>
    <axis2 name="Year">demand-percap[@year]</axis2>
    <xPath buildList="true" dataName="demand per cap" group="false" sumAll="false">gcam-consumer[@name='FoodDemand']//*[@type='input']/demand-percap/node()</xPath>
    <comments/>
  </supplyDemandQuery>
  <supplyDemandQuery title="food demand regional bias">
    <axis1 name="input">input[@name]</axis1>
    <axis2 name="Year">regional-bias[@year]</axis2>
    <xPath buildList="true" dataName="regional-bias" group="false" sumAll="false">gcam-consumer[@name='FoodDemand']//*[@type='input']/regional-bias/node()</xPath>
    <comments/>
  </supplyDemandQuery>
    </queryGroup>
</queryGroup>
